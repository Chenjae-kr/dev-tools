<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dev Tools</title>
<script src="tools.js"></script>
<script src="nav.js"></script>
<link rel="stylesheet" href="styles.css">
<style>
.finder{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:8px 0 16px}
.finder input,.finder select{flex:1;min-width:220px;background:transparent;border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);font-family:'JetBrains Mono',monospace}
.finder select{max-width:260px;flex:0 0 260px;background:var(--surface)}
.cat-chips{display:flex;gap:8px;flex-wrap:wrap}
.cat-chip{border:1px solid var(--border);background:var(--surface);color:var(--text-muted);padding:7px 10px;border-radius:999px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px}
.cat-chip.active{color:var(--accent);border-color:rgba(79,255,176,.35);background:rgba(79,255,176,.08)}
.category-head{display:flex;justify-content:space-between;align-items:center;margin-top:22px}
.category-head .count{font-size:11px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
</style>
</head>
<body>

<script>renderNav();</script>

<!-- â”€â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="container">
  <section class="hero">
    <p class="hero-kicker">developer utilities</p>
    <div class="hero-row">
      <h1>Dev<em>Tools</em></h1>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="stat-num" id="toolCount">2</span>
          <span class="stat-label">Tools</span>
        </div>
        <div class="hero-stat">
          <span class="stat-num" id="categoryCount">4</span>
          <span class="stat-label">Categories</span>
        </div>
        <div class="hero-stat">
          <span class="stat-num">Multi</span>
          <span class="stat-label">Outputs</span>
        </div>
      </div>
    </div>
  </section>

  <!-- â”€â”€â”€ Tools Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <p class="section-label">Tools</p>

  <div class="finder">
    <input id="toolSearch" placeholder="íˆ´ ê²€ìƒ‰ (ì´ë¦„/ì„¤ëª…/íƒœê·¸, #íƒœê·¸ê²€ìƒ‰ ì§€ì›)">
    <select id="tagFilter"></select>
    <div class="cat-chips" id="catChips"></div>
  </div>

  <div id="toolsGroups"></div>

  <script>
    function oneLineSummary({ desc }) {
      const text = String(desc || '').replace(/\s+/g, ' ').trim();
      if (!text) return '';
      const firstSentence = text.split('. ')[0].trim();
      return firstSentence.endsWith('.') ? firstSentence : `${firstSentence}.`;
    }

    function slugCategory(cat) {
      return String(cat || 'other').toLowerCase().replace(/[^a-z0-9ê°€-íž£]+/g, '-');
    }

    function tagStyle(tag) {
      let h = 0;
      const s = String(tag || '');
      for (let i = 0; i < s.length; i++) h = ((h << 5) - h + s.charCodeAt(i)) | 0;
      const hue = Math.abs(h) % 360;
      const isDark = document.documentElement.getAttribute('data-theme') !== 'light';
      if (isDark) {
        return `background: hsla(${hue}, 55%, 22%, .30); border-color: hsla(${hue}, 70%, 62%, .42); color: hsl(${hue}, 35%, 86%);`;
      }
      return `background: hsla(${hue}, 75%, 96%, 1); border-color: hsla(${hue}, 38%, 62%, .45); color: hsl(${hue}, 42%, 28%);`;
    }

    function renderToolCard({ href, icon, title, desc, tags, footer, category }) {
      const catClass = `cat-${slugCategory(category)}`;
      return `
        <a class="tool-card ${catClass}" href="tools/${href}">
          <div class="card-top">
            <div class="card-icon">${icon}</div>
            <span class="card-arrow">â†’</span>
          </div>
          <div class="card-title">${title}</div>
          <p class="card-desc">${oneLineSummary({ desc, tags })}</p>
          <div class="card-tags">
            ${(tags || []).map(t => `<span class="card-tag" style="${tagStyle(t)}">${t}</span>`).join('')}
          </div>
          <div class="card-footer">
            <span>${footer}</span>
          </div>
        </a>`;
    }

    const groupsEl = document.getElementById('toolsGroups');
    const searchEl = document.getElementById('toolSearch');
    const chipsEl = document.getElementById('catChips');
    const tagFilterEl = document.getElementById('tagFilter');
    const categories = (typeof TOOL_CATEGORIES !== 'undefined' && TOOL_CATEGORIES.length)
      ? TOOL_CATEGORIES
      : [...new Set(TOOLS.map(t => t.category || 'Other'))];
    const allTags = [...new Set(TOOLS.flatMap(t => t.tags || []))].sort((a,b)=>a.localeCompare(b));

    let activeCategory = 'ALL';

    function matchesQuery(tool, q){
      if(!q) return true;
      const tags = (tool.tags || []).map(t => t.toLowerCase());
      if (q.startsWith('#')) {
        const needle = q.slice(1).trim();
        if (!needle) return true;
        return tags.some(t => t.includes(needle));
      }
      const hay = [tool.title, tool.label, tool.desc, ...(tool.tags||[])].join(' ').toLowerCase();
      return hay.includes(q);
    }

    function renderChips(){
      const all = ['ALL', ...categories];
      chipsEl.innerHTML = all.map(cat => `<button class="cat-chip${cat===activeCategory?' active':''}" data-cat="${cat}">${cat}</button>`).join('');
      chipsEl.querySelectorAll('.cat-chip').forEach(btn=>btn.addEventListener('click', ()=>{
        activeCategory = btn.dataset.cat;
        renderChips();
        renderGroups();
      }));
    }

    function renderGroups(){
      const q = (searchEl.value || '').trim().toLowerCase();
      const selectedTag = tagFilterEl.value || '';

      groupsEl.innerHTML = categories.map(cat => {
        const tools = TOOLS
          .filter(t => (t.category || 'Other') === cat)
          .filter(t => activeCategory === 'ALL' || activeCategory === cat)
          .filter(t => !selectedTag || (t.tags || []).includes(selectedTag))
          .filter(t => matchesQuery(t, q));

        if (!tools.length) return '';
        return `
          <div class="category-head">
            <p class="section-label">${cat}</p>
            <span class="count">${tools.length} tools</span>
          </div>
          <div class="tools-grid">
            ${tools.map(renderToolCard).join('')}
          </div>
        `;
      }).join('');

      if (!groupsEl.innerHTML.trim()) {
        groupsEl.innerHTML = `<div class="panel"><div class="empty-state"><div class="icon">ðŸ”Ž</div><p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´</p></div></div>`;
      }
    }

    function renderTagFilter(){
      tagFilterEl.innerHTML = [`<option value="">íƒœê·¸ ì „ì²´</option>`, ...allTags.map(t=>`<option value="${t}">#${t}</option>`)].join('');
    }

    renderTagFilter();
    renderChips();
    renderGroups();
    searchEl.addEventListener('input', renderGroups);
    tagFilterEl.addEventListener('change', renderGroups);

    document.getElementById('toolCount').textContent = TOOLS.length;
    document.getElementById('categoryCount').textContent = categories.filter(cat => TOOLS.some(t => (t.category || 'Other') === cat)).length;
  </script>

  <footer>// Dev Tools â€” a collection of developer utilities</footer>
</div>

</body>
</html>
