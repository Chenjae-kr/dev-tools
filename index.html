<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dev Tools</title>
<script src="tools.js"></script>
<script src="nav.js"></script>
<link rel="stylesheet" href="styles.css">
<style>
.hero{padding:56px 0 24px;margin-bottom:20px}
.finder{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:18px 0 8px}
.finder input{flex:1;min-width:220px;background:transparent;border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:16px}
.tools-label{margin:10px 0 12px}
.cat-chips{display:flex;gap:8px;flex-wrap:wrap}
.cat-chip{border:1px solid var(--border);background:var(--surface);color:var(--text-muted);padding:7px 10px;border-radius:999px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px}
.cat-chip.active{transform:translateY(-1px)}
.cat-chip-all.active{color:var(--accent);border-color:rgba(79,255,176,.42);background:rgba(79,255,176,.10)}
.cat-chip-sql-db.active{color:#dbeafe;border-color:rgba(96,165,250,.55);background:rgba(96,165,250,.16)}
.cat-chip-data-format.active{color:#ede9fe;border-color:rgba(167,139,250,.55);background:rgba(167,139,250,.16)}
.cat-chip-image.active{color:#dcfce7;border-color:rgba(52,211,153,.55);background:rgba(52,211,153,.16)}
.cat-chip-text-compare.active{color:#fef3c7;border-color:rgba(251,191,36,.55);background:rgba(251,191,36,.16)}
.cat-chip-utility.active{color:#fee2e2;border-color:rgba(248,113,113,.55);background:rgba(248,113,113,.16)}
[data-theme="light"] .cat-chip-sql-db.active{color:#1e3a8a;background:rgba(96,165,250,.20)}
[data-theme="light"] .cat-chip-data-format.active{color:#5b21b6;background:rgba(167,139,250,.20)}
[data-theme="light"] .cat-chip-image.active{color:#065f46;background:rgba(52,211,153,.20)}
[data-theme="light"] .cat-chip-text-compare.active{color:#92400e;background:rgba(251,191,36,.22)}
[data-theme="light"] .cat-chip-utility.active{color:#991b1b;background:rgba(248,113,113,.20)}
.category-head{display:flex;justify-content:space-between;align-items:center;margin-top:22px}
.category-head .count{font-size:11px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.fav-btn{border:1px solid var(--border);background:var(--surface);color:var(--text-dim);border-radius:8px;padding:4px 8px;cursor:pointer;font-size:12px}
.fav-btn.active{color:#fbbf24;border-color:#fbbf24;background:rgba(251,191,36,.12)}
.recent-remove-btn{border:1px solid var(--border);background:var(--surface);color:var(--text-dim);border-radius:8px;padding:4px 8px;cursor:pointer;font-size:12px;margin-left:6px}
.recent-remove-btn:hover{color:#f87171;border-color:#f87171;background:rgba(248,113,113,.12)}
.recent-utility-bar{display:flex;flex-wrap:wrap;align-items:center;gap:8px;padding:8px 0 12px}
.recent-chip-row{display:flex;flex-wrap:wrap;gap:8px}
.recent-chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--surface);color:var(--text);border-radius:999px;padding:5px 10px;font-size:11px;text-decoration:none}
.recent-chip:hover{border-color:var(--accent)}
.recent-chip-remove{border:none;background:transparent;color:var(--text-dim);cursor:pointer;font-size:11px;padding:0 2px;line-height:1}
.recent-chip-remove:hover{color:#f87171}
.favorites-quick{margin-left:auto;display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-dim);border-radius:999px;padding:5px 10px;font-size:11px;font-family:'JetBrains Mono',monospace;cursor:pointer}
.favorites-quick:hover{color:var(--text);border-color:var(--text-muted)}
.section-toggle-btn{border:1px solid var(--border);background:var(--surface);color:var(--text-dim);border-radius:8px;padding:3px 8px;cursor:pointer;font-size:11px;font-family:'JetBrains Mono',monospace;margin-left:8px}
.section-toggle-btn:hover{color:var(--text);border-color:var(--text-muted)}
.category-head .head-actions{display:flex;align-items:center;gap:8px}

@media (max-width: 768px){
  .hero{padding:12px 0 8px !important;margin-bottom:8px !important}
  .hero-kicker{display:none}
  .hero h1{display:none}
  .hero-stats{display:none}
  .finder{margin:6px 0 2px}
  .finder input{padding:9px 10px}
  .cat-chip{padding:6px 9px;font-size:10px}
  .recent-utility-bar{padding:6px 0 8px;display:block}
  .recent-chip-row{flex-wrap:nowrap;overflow-x:auto;padding-bottom:2px}
  .recent-chip{white-space:nowrap;flex:0 0 auto}
  .favorites-quick{margin:8px 0 0 auto}
  .tools-label{margin:6px 0 8px}
}

</style>
</head>
<body>

<script>renderNav();</script>

<!-- â”€â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="container">
  <section class="hero">
    <p class="hero-kicker">developer utilities</p>
    <div class="hero-row">
      <h1>Dev<em>Tools</em></h1>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="stat-num" id="toolCount">2</span>
          <span class="stat-label">Tools</span>
        </div>
        <div class="hero-stat">
          <span class="stat-num" id="categoryCount">4</span>
          <span class="stat-label">Categories</span>
        </div>
      </div>
    </div>
    <div class="finder">
      <input id="toolSearch" placeholder="íˆ´ ê²€ìƒ‰ (ì´ë¦„/ì„¤ëª…/íƒœê·¸)">
      <div class="cat-chips" id="catChips"></div>
    </div>
    <div id="recentGroups"></div>
  </section>

  <!-- â”€â”€â”€ Tools Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <p class="section-label tools-label">Tools</p>

  <div id="favoriteGroups"></div>
  <div id="toolsGroups"></div>

  <script>
    function oneLineSummary({ desc }) {
      const text = String(desc || '').replace(/\s+/g, ' ').trim();
      if (!text) return '';
      const firstSentence = text.split('. ')[0].trim();
      return firstSentence.endsWith('.') ? firstSentence : `${firstSentence}.`;
    }

    function slugCategory(cat) {
      return String(cat || 'other').toLowerCase().replace(/[^a-z0-9ê°€-íž£]+/g, '-');
    }

    function tagStyle(tag, category) {
      const cat = slugCategory(category);
      const map = {
        'sql-db': '96,165,250',
        'data-format': '167,139,250',
        'image': '52,211,153',
        'text-compare': '251,191,36',
        'utility': '248,113,113',
      };
      const rgb = map[cat] || '148,163,184';
      const isDark = document.documentElement.getAttribute('data-theme') !== 'light';
      if (isDark) return `background: rgba(${rgb}, .16); border-color: rgba(${rgb}, .42); color: #e5e7eb;`;
      return `background: rgba(${rgb}, .14); border-color: rgba(${rgb}, .38); color: #334155;`;
    }

    function renderToolCard({ href, icon, title, desc, tags, footer, category }, opts = {}) {
      const catClass = `cat-${slugCategory(category)}`;
      const shownTags = (tags || []).slice(0, 3);
      const hiddenTagCount = Math.max(0, (tags || []).length - shownTags.length);
      const ioText = String(footer || '').replace(/\s+/g, ' ').trim();
      const isFav = favorites.has(href);
      const removableRecent = opts.removableRecent === true;

      return `
        <a class="tool-card ${catClass}" href="tools/${href}" data-tool-href="${href}">
          <div class="card-top">
            <div class="card-icon">${icon}</div>
            <div>
              <button class="fav-btn ${isFav ? 'active' : ''}" data-fav="${href}" title="ì¦ê²¨ì°¾ê¸°">â˜…</button>
              ${removableRecent ? `<button class="recent-remove-btn" data-remove-recent="${href}" title="Recentì—ì„œ ì œê±°">âœ•</button>` : ''}
              <span class="card-arrow">â†’</span>
            </div>
          </div>
          <div class="card-title">${title}</div>
          <p class="card-desc">${oneLineSummary({ desc, tags })}</p>
          <div class="card-io" title="${ioText}">ìž…ì¶œë ¥: ${ioText}</div>
          <div class="card-tags">
            ${shownTags.map(t => `<button class="card-tag" data-tag="${t}" style="${tagStyle(t, category)}">${t}</button>`).join('')}
            ${hiddenTagCount > 0 ? `<span class="card-tag card-tag-more">+${hiddenTagCount}</span>` : ''}
          </div>
          <div class="card-footer">
            <span>${footer}</span>
          </div>
        </a>`;
    }

    const groupsEl = document.getElementById('toolsGroups');
    const recentGroupsEl = document.getElementById('recentGroups');
    const favoriteGroupsEl = document.getElementById('favoriteGroups');
    const searchEl = document.getElementById('toolSearch');
    const chipsEl = document.getElementById('catChips');
    const categories = (typeof TOOL_CATEGORIES !== 'undefined' && TOOL_CATEGORIES.length)
      ? TOOL_CATEGORIES
      : [...new Set(TOOLS.map(t => t.category || 'Other'))];

    let activeCategory = 'ALL';
    let favorites = new Set(JSON.parse(localStorage.getItem('devtools-favorites') || '[]'));
    let recents = JSON.parse(localStorage.getItem('devtools-recents') || '[]');
    let collapsedSections = JSON.parse(localStorage.getItem('devtools-collapsed-sections') || '{}');
    function saveFavorites(){ localStorage.setItem('devtools-favorites', JSON.stringify([...favorites])); }
    function saveRecents(){ localStorage.setItem('devtools-recents', JSON.stringify(recents.slice(0,4))); }
    function saveCollapsed(){ localStorage.setItem('devtools-collapsed-sections', JSON.stringify(collapsedSections)); }
    function isCollapsed(key){ return !!collapsedSections[key]; }
    function setCollapsed(key, v){ collapsedSections[key] = !!v; saveCollapsed(); }
    function sectionHead(title, count, key){
      const collapsed = isCollapsed(key);
      return `
        <div class="category-head">
          <p class="section-label">${title}</p>
          <div class="head-actions">
            <span class="count">${count} tools</span>
            <button class="section-toggle-btn" data-section-toggle="${key}" title="${collapsed ? 'íŽ¼ì¹˜ê¸°' : 'ì ‘ê¸°'}">${collapsed ? 'â–¸' : 'â–¾'}</button>
          </div>
        </div>
      `;
    }

    function matchesQuery(tool, q){
      if(!q) return true;
      const hay = [tool.title, tool.label, tool.desc, ...(tool.tags||[])].join(' ').toLowerCase();
      return hay.includes(q);
    }

    function renderChips(){
      const all = ['ALL', ...categories];
      chipsEl.innerHTML = all.map(cat => {
        const cls = cat === 'ALL' ? 'cat-chip-all' : `cat-chip-${slugCategory(cat)}`;
        return `<button class="cat-chip ${cls}${cat===activeCategory?' active':''}" data-cat="${cat}">${cat}</button>`;
      }).join('');
      chipsEl.querySelectorAll('.cat-chip').forEach(btn=>btn.addEventListener('click', ()=>{
        activeCategory = btn.dataset.cat;
        renderChips();
        renderGroups();
      }));
    }

    function bindCardButtons(){
      document.querySelectorAll('[data-fav]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const href = btn.dataset.fav;
          if (favorites.has(href)) favorites.delete(href);
          else favorites.add(href);
          saveFavorites();
          renderGroups();
        });
      });

      document.querySelectorAll('[data-tag]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          searchEl.value = btn.dataset.tag;
          renderGroups();
        });
      });

      document.querySelectorAll('[data-remove-recent]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const href = btn.dataset.removeRecent;
          recents = recents.filter(x => x !== href);
          saveRecents();
          renderGroups();
        });
      });

      document.querySelectorAll('[data-remove-recent-chip]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const href = btn.dataset.removeRecentChip;
          recents = recents.filter(x => x !== href);
          saveRecents();
          renderGroups();
        });
      });

      document.querySelectorAll('[data-recent-open]').forEach(el => {
        el.addEventListener('click', () => {
          const href = el.dataset.recentOpen;
          recents = [href, ...recents.filter(x => x !== href)].slice(0, 4);
          saveRecents();
        });
      });

      document.querySelectorAll('[data-section-toggle]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const key = btn.dataset.sectionToggle;
          setCollapsed(key, !isCollapsed(key));
          renderGroups();
        });
      });

      const fq = document.getElementById('favoritesQuickBtn');
      if (fq) {
        fq.addEventListener('click', (e) => {
          e.preventDefault();
          const section = document.getElementById('favoritesSection');
          if (section) section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      }

      document.querySelectorAll('.tool-card[data-tool-href]').forEach(card => {
        card.addEventListener('click', () => {
          const href = card.dataset.toolHref;
          recents = [href, ...recents.filter(x => x !== href)].slice(0, 4);
          saveRecents();
        });
      });
    }

    function renderRecents(query='', category='ALL'){
      if ((query || '').trim() || category !== 'ALL') {
        recentGroupsEl.innerHTML = '';
        return;
      }
      const recentTools = recents.map(h => TOOLS.find(t => t.href === h)).filter(Boolean).slice(0,5);
      const favCount = TOOLS.filter(t => favorites.has(t.href)).length;
      if (!recentTools.length && !favCount) {
        recentGroupsEl.innerHTML = '';
        return;
      }
      recentGroupsEl.innerHTML = `
        <div class="recent-utility-bar">
          <div class="recent-chip-row">
            ${recentTools.map(t => `
              <a class="recent-chip" href="tools/${t.href}" data-recent-open="${t.href}">
                <span>${t.icon}</span>
                <span>${t.title || t.label}</span>
                <button class="recent-chip-remove" data-remove-recent-chip="${t.href}" title="Recentì—ì„œ ì œê±°">âœ•</button>
              </a>
            `).join('')}
          </div>
          ${favCount ? `<button class="favorites-quick" id="favoritesQuickBtn">â˜… Favorites ${favCount}</button>` : ''}
        </div>
      `;
    }

    function renderFavorites(query='', category='ALL'){
      if ((query || '').trim() || category !== 'ALL') {
        favoriteGroupsEl.innerHTML = '';
        return;
      }

      const favTools = TOOLS.filter(t => favorites.has(t.href));
      if (!favTools.length) {
        favoriteGroupsEl.innerHTML = '';
        return;
      }
      const key = 'favorites';
      favoriteGroupsEl.innerHTML = `
        <div id="favoritesSection"></div>
        ${sectionHead('Favorites', favTools.length, key)}
        <div class="tools-grid favorite-grid ${isCollapsed(key) ? 'hidden' : ''}">${favTools.map(renderToolCard).join('')}</div>
      `;
    }

    function renderGroups(){
      const q = (searchEl.value || '').trim().toLowerCase();

      groupsEl.innerHTML = categories.map(cat => {
        const tools = TOOLS
          .filter(t => (t.category || 'Other') === cat)
          .filter(t => activeCategory === 'ALL' || activeCategory === cat)
          .filter(t => matchesQuery(t, q));

        if (!tools.length) return '';
        const key = `cat:${slugCategory(cat)}`;
        return `
          ${sectionHead(cat, tools.length, key)}
          <div class="tools-grid ${isCollapsed(key) ? 'hidden' : ''}">
            ${tools.map(renderToolCard).join('')}
          </div>
        `;
      }).join('');

      if (!groupsEl.innerHTML.trim()) {
        groupsEl.innerHTML = `<div class="panel"><div class="empty-state"><div class="icon">ðŸ”Ž</div><p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´</p></div></div>`;
      }

      renderRecents(q, activeCategory);
      renderFavorites(q, activeCategory);
      bindCardButtons();
    }

    renderChips();
    renderGroups();
    searchEl.addEventListener('input', renderGroups);

    document.getElementById('toolCount').textContent = TOOLS.length;
    document.getElementById('categoryCount').textContent = categories.filter(cat => TOOLS.some(t => (t.category || 'Other') === cat)).length;
  </script>

  <footer>// Dev Tools â€” a collection of developer utilities</footer>
</div>

</body>
</html>
